---
title: 運営のいないサーバーを作る
date: 2020-10-11
tags:
  - Minecraft
  - サーバー開発
  - アジ鯖
slug: "/player-to-player"
---

どうもこんばんは(？)

突然なんですが、マインクラフトサーバーに運営って必要だと思いますか？

僕は必要ないと思います。

どういうことか説明しますので暴れないでください。

### ゲームバランスって、難しい

マインクラフトサーバーを運営しているとゲームバランスの難しさを痛感します。

**「そんな調整しても、納得しないぞ俺は！」**

プレイヤーが考えているバランスと運営が考えているバランスが違うことで発生することがほとんどです。

そしてついに...

原因を考えたときに一つの答えに行き着きました。

### そもそもマインクラフトサーバーって？

今、マインクラフトサーバーのほとんどが<span style="color: green;">UtoP</span>だと思っています。

「は？」じゃないです。

要するに、<span style="color: green;">運営がサーバーというコンテンツを作り、プレイヤーに遊んでもらう</span>という意味を込めて、<span style="color: green;">UNEI to Player</span>、つまり<span style="color: green;">UtoP</span>と言えますよね。

「...いやそれ普通じゃね？」

と思うようではまだまだですね...考えを改めてご飯ではなくパンを食べる必要があります。

### そろそろヤバい

アジ鯖は転換点に立たされているような気がします。

これからも成長を続けていくために、ある大きな挑戦をしないといけないかもしれません。

まず、アジ鯖は抱えているプレイヤーが多すぎます。

このまま運営がサーバーを調整し続けるのでは体力も持ちませんし、更新し続けないと遊ぶプレイヤー側も飽きてしまいます。

そうなれば運営のモチベーションが下がり、運営までいなくなってしまいます。

運営もプレイヤーです。そう、運営はプレイヤーです。運営はプレイヤーなのです。

### 挑戦しよう

分かりました。

では、<span style="color: green;">UtoP</span>を<span style="color: red;">PtoP</span>にするのです。

もうお分かりですね？

つまり<span style="color: red;">Player to Player</span>、<span style="color: red;">プレイヤーがサーバーというコンテンツを作り、プレイヤーに遊んでもらう</span>のです。

アジ鯖はそれを提供するプラットフォームになるわけです。

ほう...

### どうやるの？

まず技術的な説明になりますが、以下の2種類のデータを把握する必要があります。

**<span style="color: blue;">構成データ</span>**
- 使用するJavaのバージョン
- サーバーとプラグインのJarファイル
- サーバーとプラグインの設定ファイル(YamlやProperties等)

**<span style="color: orange;">永続データ</span>**
- ワールドのフォルダー(インベントリー含む)
- プラグインが生成したファイル(YamlやJson等)
- データベース(MySQLやRedis等)

OK、次に行こう。

<details>
  <summary>Q. サーバーはどうやって作るの？</summary>
  <p>A. Webからポチポチしてプラグインをアップロードするだけ！独自のWebUIを開発し、ボタン操作で<span style="color: blue;">構成データ</span>、つまりサーバーの元となるデータを作る。</p>
</details>

---

<details>
  <summary>Q. サーバーをどこで起動する？</summary>
  <p>A. アジ鯖で起動する。<span style="color: blue;">構成データ</span>を元に<u>サーバーを自動生成</u>して起動、バンジー等に繋げる、それだけ。</p>
</details>

---

<details>
  <summary>Q. どうやって参加する？</summary>
  <p>A. アジ鯖に参加して起動したサーバーを表示し、選択するのみ！</p>
</details>

---

<details>
  <summary>Q. 安全なの？</summary>
  <p>A. プレイヤーが作るのは<span style="color: blue;">構成データ</span>だけでいいので比較的安全だと思います。ただプラグインのセキュリティーチェックは必要かもしれません。</p>
</details>

---

<details>
  <summary>Q. データは保存される？</summary>
  <p>A. <span style="color: blue;">構成データ</span>はGitHubと連携して自動保存、<span style="color: orange;">永続データ</span>はアジ鯖のストレージに保存されます。しかも最小限でいいのでエコですね。ゎら</p>
</details>

---

<details>
  <summary>Q. 今あるサーバーは消すの？</summary>
  <p>A. 消しません。もし新しい仕様になるのであれば絶対に移行します。</p>
</details>

### 問題点

実現する上で発生しそうな課題が3個思いつきました。

<details>
  <summary>サーバー設定とプラグインのリアルタイム更新</summary>
  <p>単にコンテナとして包んで起動しただけでは毎回再起動する羽目になってしまいます。</p>
  <p>なんとかしてリアルタイムで更新せねば...</p>
</details>

---

<details>
  <summary>グローバルIPを抜かれないように対策</summary>
  <p>独自のプラグインで抜かれたらDDoSからの死にます。RIP</p>
</details>

---

<details>
  <summary>負荷対策</summary>
  <p>100人で激重より、50人で遊べるサーバーがたくさんある方が遊びがいがあるよね？そう思わない？</p>
  <p>そして、独自のプラグインで大量の負荷をかけられたら死にます。RIP</p>
</details>

### まとめ

これはオープンソース化が進み、出てきた考え方の一つに過ぎません。

運営がすべてを仕切る事により生まれる何かが失われる可能性もあります。

今すぐに実現できるようなものではないけど、うまく行けば最強に面白いサーバーになると思う。

俺はそうなってほしい。

これからもアジ鯖をよろしくお願いします。
